[logic]
active = ph_door@closed

[ph_door@closed]
locked = false
closed = true
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {=is_actor_enemy_to_faction(ecolog)} ph_door@locked, ph_door@open
on_info = %-yan_trader_door_open%
on_info2 = {=is_night} ph_door@locked

[ph_door@open]
locked = false
closed = false
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {=is_actor_enemy_to_faction(ecolog)} ph_door@locked, ph_door@closed
on_info = %+yan_trader_door_open%
on_timer = 4000 | ph_door@open_temp

[ph_door@open_temp]
locked = false
closed = false
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {=is_actor_enemy_to_faction(ecolog)} ph_door@locked, ph_door@closed
on_info = %+yan_trader_door_open%
on_info2 = {=is_night} ph_door@locked
on_timer = 1 | ph_door@closed

[ph_door@locked]
closed = true
locked = true
on_info = {!is_night} ph_door@closed

[ph_door@close]
locked = false
closed = true
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_use = {=is_actor_enemy_to_faction(ecolog)} ph_door@locked, ph_door@open
on_info = %-yan_trader_door_open%
on_info2 = {=is_night} ph_door@locked