;----------------------------------------------------------------------------------------
; PKM, remade by Surs for A.R.E.A. (29.01.2020)
;----------------------------------------------------------------------------------------
[wpn_pkm]:default_weapon_params
visual                  	= dynamics\weapons\wpn_pkm\wpn_pkm.ogf
$spawn						= "weapons\pkm"				; option for Level Editor
$npc						= on						; option for Level Editor
class						= WP_AK74
inv_name					= st_wpn_pkm
inv_name_short				= st_wpn_pkm
description					= st_wpn_pkm_descr
heating_rates				= mgun
ef_main_weapon_type			= 2
ef_weapon_type				= 10
default_to_ruck				= false
sprint_allowed				= true ;false
repair_type					= rifle_7.62
cost						= 55850
weapon_class				= assault_rifle
inv_weight					= 7.5
inv_volume					= 8
ph_mass                 	= 8
upgrades					= up_gr_firstab_pkm, up_gr_seconab_pkm, up_gr_thirdab_pkm, up_gr_fourtab_pkm, up_gr_fifthab_pkm
installed_upgrades			=
upgrade_scheme				= upgrade_scheme_pkm
;--TTX----------------------------------------------------------------------------
hit_power					= 0.75, 0.75, 0.75, 0.75
hit_impulse					= 40
hit_type					= fire_wound
fire_distance				= 1500
bullet_speed				= 825
rpm							= 650
rpm_empty_click				= 200
time_to_aim					= 5.0
hud							= wpn_pkm_hud

misfire_probability			= 0.005
misfire_start_condition		= 0.78
misfire_end_condition		= 0.16
misfire_start_prob			= 0.007
misfire_end_prob			= 0.11
condition_shot_dec			= 0.0008
condition_queue_shot_dec	= 0.0008

ammo_elapsed				= 100
ammo_mag_size				= 100
fire_modes					= -1
magazine_sect				= mag_762x54_100_pkm
ammo_class					= ammo_pkm_100, ammo_pkm_100_bad, ammo_pkm_100_verybad, ammo_7.62x54_7h1, ammo_7.62x54_7h1_bad, ammo_7.62x54_7h1_verybad, ammo_7.62x54_7h14, ammo_7.62x54_7h14_bad, ammo_7.62x54_7h14_verybad, ammo_7.62x54_ap, ammo_7.62x54_ap_bad, ammo_7.62x54_ap_verybad
grenade_class				= ammo_m209, ammo_m209_bad, ammo_m209_verybad
slot						= 2
animation_slot				= 2
;--дисперсия--------------------------------------------------------------------
fire_dispersion_base		= 0.54						;угол (в градусах) базовой дисперсии оружия (оружия зажатого в тисках)
control_inertion_factor		= 1.93f
crosshair_inertion			= 9.3

cam_return					= 0
cam_relax_speed				= 13						;скорость возврата в исходное положение
cam_relax_speed_ai			= 360						;скорость возврата в исходное положение у АИ
cam_dispersion				= 1.35						;увеличения угла (в градусах) с каждым выстрелом
cam_dispersion_inc			= 1.35						;увеличениe cam_dispersion с каждым выстрелом
cam_dispersion_frac			= 1.10						;ствол будет подыматься на cam_dispersion*cam_dispersion_frac +- cam_dispersion*(1-cam_dispersion_frac)
cam_max_angle				= 50.0						;максимальный угол отдачи
cam_max_angle_horz			= 50.0						;(degree) maximum shot horizontal degree
cam_step_angle_horz			= 2.1						;(degree) size of step camera moved in horizontal position while shooting

PDM_disp_base 				= 1.25
PDM_disp_vel_factor 		= 2.4
PDM_disp_accel_factor 		= 2.4
PDM_disp_crouch				= 1.0
PDM_disp_crouch_no_acc		= 1.0

zoom_cam_relax_speed		= 10
zoom_cam_relax_speed_ai		= 360
zoom_cam_dispersion			= 1.28
zoom_cam_dispersion_inc		= 1.28
zoom_cam_dispersion_frac	= 1.0
zoom_cam_max_angle			= 50.0
zoom_cam_max_angle_horz		= 50.0
zoom_cam_step_angle_horz	= 1.93

fire_dispersion_condition_factor = 0.001
;--DOF-------------------------------------------------------------------------
zoom_dof					= 0.5, 1.0, 180
reload_dof					= 0.0, 0.5, 5, 6.2
;-------------------------------------------------------------------------------
inv_grid_width				= 6
inv_grid_height				= 2
inv_grid_x					= 44
inv_grid_y					= 46

upgr_icon_x					= 1750
upgr_icon_y					= 700
upgr_icon_width				= 300
upgr_icon_height			= 100

kill_msg_x					= 80
kill_msg_y					= 59
kill_msg_width				= 87
kill_msg_height				= 24
;-------------------------------------------------------------------------------
position					= -0.027, -0.097, 0.042
orientation					= 0, -2, 0
fire_point					= 0, 0.176, 0.810
fire_point2					= 0, 0.097, 0.722
flame_particles			    = weapons\new_effects\aksu
smoke_particles			    = weapons\new_effects\smoke_silencer_sniper_rifle
grenade_flame_particles 	= weapons\generic_weapon01
shell_3d_sect				= shell_762
shell_drop_left				= true
shell_point					= -0.02,0.167,0.15
shell_dir					= 0, 0, 0
shell_particles	 			= weapons\762x54l

light_disabled              = false
light_color             	= 0.6,0.5,0.3
light_range             	= 5
light_var_color         	= 0.05
light_var_range        	 	= 0.5
light_time              	= 0.2

;addons
scope_status            	= 0
silencer_status         	= 0
grenade_launcher_status 	= 0

zoom_enabled            	= true
zoom_rotate_time        	= 0.25
scope_zoom_factor       	= 1.03

;silencer_flame_particles	= weapons\generic_weapon01
silencer_smoke_particles	= weapons\new_effects\smoke_silencer_pistol

silencer_light_color		= 0.6,0.5,0.3
silencer_light_range    	= 0.01
silencer_light_var_color	= 0.05
silencer_light_var_range	= 0.5
silencer_light_time			= 0.2
;--A.R.E.A. Sound Remake--------------------------------------------------------
snd_holster				    = weapons\pkm\pkm_holster
snd_draw				    = weapons\pkm\pkm_draw
snd_empty				    = weapons\pkm\pkm_empty	
snd_reload				    = weapons\pkm\pkm_reload
snd_reload_misfire			= weapons\pkm\pkm_reload,1,0,6.2
snd_reload_detached			= weapons\pkm\pkm_reload,1,0,3.6
snd_reload_detached_empty	= weapons\pkm\pkm_reload,1,0,3.6
snd_magazine_detach			= weapons\pkm\pkm_mag_detach
snd_shoot				    = weapons\pkm\pkm_shoot_null
;--Магазины---------------------------------------------------------------------
[mag_762x54_100_pkm]
magazine_name				= magazine_762x54_cnt_100
magazine_x					= 113
magazine_y					= 45
addon_bone_hud				= boxmag
custom_icon 				= 11,0,1,1 ;x,y,width,height
;-------------------------------------------------------------------------------
[mag_762x54_100_pkp]:mag_762x54_100_pkm
custom_icon 				= 11,0,1,2 ;x,y,width,height
;-------------------------------------------------------------------------------
[wpn_pkm_hud]:hud_base
item_visual             	= dynamics\weapons\wpn_pkm\wpn_pkm_hud.ogf
zoom_hide_crosshair     	= true
shell_point					= 0.02623,0.034935,0.189255
shell_dir       			= 0,1,0
shell_bone					= gilza
fire_point					= 0,0,0
fire_bone      				= muzzle
fire_point2					= 0,0,0
fire_bone2					= wpn_body

hands_position				= -0.09934,-0.132701,-0.009014
hands_position_16x9			= -0.09934,-0.132701,-0.009014
hands_orientation			= 0.511567,2.010105,-0.131365
hands_orientation_16x9		= 0.511567,2.010105,-0.131365

aim_hud_offset_pos			= -0.055265,0.00055,-0.1
aim_hud_offset_pos_16x9		= -0.055265,0.00055,-0.1
aim_hud_offset_rot			= 0.04485,0.006667,0
aim_hud_offset_rot_16x9		= 0.04485,0.006667,0

aim_hud_offset_pos_alt		= -0.016165,-0.03721,0
aim_hud_offset_pos_alt_16x9	= -0.016165,-0.03721,0
aim_hud_offset_rot_alt		= 0,0.001532,0.585948
aim_hud_offset_rot_alt_16x9	= 0,0.001532,0.585948

anm_show             		= pkm_draw
anm_hide             		= pkm_holster
anm_idle             		= pkm_idle
anm_idle_sprint         	= pkm_idle_sprint
anm_idle_moving 			= pkm_idle_moving
anm_idle_moving_crouch		= pkm_idle_crouch
anm_shots               	= pkm_shoot, shoot
anm_shots_empty				= pkm_idle
anm_reload              	= pkm_reload, reload
anm_reload_empty        	= pkm_reload, reload
anm_reload_detached			= pkm_reload, reload, , 3.6
anm_reload_detached_empty	= pkm_reload, reload, , 3.6
anm_reload_misfire			= pkm_misfire, misfire
anm_idle_aim           		= pkm_idle_aim
anm_bore					= pkm_idle_aim
anm_use_start				= pkm_holster, ,0.4
anm_use_end					= pkm_draw, ,0.6
anm_jump					= pkm_draw, ,1.6
;-----------------------------------------------------------------------------
[wpn_pkm_zulus]:wpn_pkm
visual                  	= dynamics\weapons\wpn_pkm\wpn_pkm_zulus.ogf
$spawn                      = "weapons\uniq\wpn_pkm_zulus"
description             	= st_wpn_pkm_zulus_descr
inv_name                	= st_wpn_pkm_zulus
installed_upgrades      	= up_fiftha_pkm
hit_power              		= 0.784, 0.784, 0.784, 0.784
bullet_speed            	= 840
rpm                     	= 680
hud                     	= wpn_pkm_zulus_hud
misfire_start_condition		= 0.65
misfire_end_condition		= 0.09
misfire_start_prob 			= 0.004
misfire_end_prob 			= 0.03
condition_shot_dec      	= 0.0007
condition_queue_shot_dec	= 0.0007
cost                    	= 58960
inv_weight              	= 7.6
inv_volume					= 7.5
inv_grid_y           		= 48

[wpn_pkm_zulus_hud]:wpn_pkm_hud
item_visual                	= dynamics\weapons\wpn_pkm\wpn_pkm_zulus_hud.ogf

hands_position				= -0.044,-0.17,0.14
hands_position_16x9			= -0.044,-0.17,0.14
hands_orientation			= 2,2,0
hands_orientation_16x9		= 2,2,0

aim_hud_offset_pos 			= -0.1159,-0.0122,-0.1
aim_hud_offset_pos_16x9 	= -0.1159,-0.0122,-0.1
aim_hud_offset_rot 			= -0.015,0.035,0.0
aim_hud_offset_rot_16x9 	= -0.015,0.035,0.0
;-----------------------------------------------------------------------------
[wpn_pkp]:wpn_pkm
visual                  	= dynamics\weapons\wpn_pkm\wpn_pkp.ogf
description					= st_wpn_pkp_descr
inv_name					= st_wpn_pkp
inv_name_short				= st_wpn_pkp
cost                    	= 61880
inv_weight					= 8.20
hit_power              		= 0.79, 0.79, 0.79, 0.79
misfire_start_condition		= 0.75
misfire_end_condition		= 0.13
misfire_start_prob 			= 0.007
misfire_end_prob			= 0.11
condition_shot_dec      	= 0.0008
condition_queue_shot_dec	= 0.0008
hud                     	= wpn_pkp_hud
inv_grid_y           		= 50
flame_particles			    = weapons\new_effects\a1_type_ar15
magazine_sect				= mag_762x54_100_pkp

[wpn_pkp_hud]:wpn_pkm_hud
item_visual             	= dynamics\weapons\wpn_pkm\wpn_pkp_hud.ogf
aim_hud_offset_pos			= -0.055575,0.001445,-0.1
aim_hud_offset_pos_16x9		= -0.055575,0.001445,-0.1
aim_hud_offset_rot			= 0.026000,0.007939,0.0
aim_hud_offset_rot_16x9		= 0.026000,0.007939,0.0
;-----------------------------------------------------------------------------
[wpn_pkm_new]:wpn_pkm
visual							= dynamics\weapons\wpn_pkm\wpn_pkm_new.ogf
class							= WP_PM
bullet_bones					= bullet_1,bullet_2,bullet_3,bullet_4,bullet_5,bullet_6,bullet_7,bullet_8,bullet_9,bullet_10,bullet_11,bullet_12

snd_reload						= weapons\pkm\pkm_new_reload
snd_reload_empty				= weapons\pkm\pkm_new_reload_empty
snd_reload_misfire				= weapons\pkm\pkm_new_unjam
snd_reload_detached				= weapons\pkm\pkm_new_reload,1,0,3.6
snd_reload_detached_empty		= weapons\pkm\pkm_new_reload_empty,1,0,3.6
snd_check_magazine				= weapons\pkm\pkm_new_reload
hud								= wpn_pkm_new_hud

[wpn_pkm_new_hud]:wpn_pkm_hud
item_visual						= dynamics\weapons\wpn_pkm\wpn_pkm_new_hud.ogf
hands_position					= -0.021065,0.017284,0.094511
hands_position_16x9				= -0.021065,0.017284,0.094511
hands_orientation				= 0.427732,2.010105,4.729598
hands_orientation_16x9			= 0.427732,2.010105,4.729598

aim_hud_offset_pos				= 0.02139,-0.011255,-0.1
aim_hud_offset_pos_16x9			= 0.02139,-0.011255,-0.1
aim_hud_offset_rot				= 0.04485,0.006667,0.063662
aim_hud_offset_rot_16x9			= 0.04485,0.006667,0.063662

anm_show						= wpn_hand_pkm_siber_in, wpn_pkm_siber_in
anm_show_empty					= wpn_hand_pkm_siber_in, wpn_pkm_siber_idle_empty
anm_hide						= wpn_hand_pkm_siber_out, idle
anm_hide_empty					= wpn_hand_pkm_siber_out, wpn_pkm_siber_idle_empty
anm_idle						= wpn_hand_pkm_siber_idle, idle
anm_idle_empty					= wpn_hand_pkm_siber_idle, wpn_pkm_siber_idle_empty
anm_idle_aim					= wpn_hand_pkm_siber_idle_aim, idle
anm_idle_aim_empty				= wpn_hand_pkm_siber_idle_aim, wpn_pkm_siber_idle_empty
anm_idle_moving					= wpn_hand_pkm_siber_walk, wpn_pkm_siber_walk
anm_idle_moving_empty			= wpn_hand_pkm_siber_walk, wpn_pkm_siber_idle_empty
anm_idle_moving_crouch			= wpn_hand_pkm_siber_walk, wpn_pkm_siber_walk
anm_idle_moving_crouch_empty	= wpn_hand_pkm_siber_walk, wpn_pkm_siber_idle_empty
anm_idle_sprint					= wpn_hand_pkm_siber_run, wpn_pkm_siber_run
anm_idle_sprint_empty			= wpn_hand_pkm_siber_run, wpn_pkm_siber_idle_empty
anm_reload						= wpn_hand_pkm_siber_reload, wpn_pkm_siber_reload
anm_reload_misfire				= wpn_hand_pkm_siber_misfire, wpn_pkm_siber_misfire
anm_reload_empty				= wpn_hand_pkm_siber_reload_empty, wpn_pkm_siber_reload_empty
anm_reload_detached				= wpn_hand_pkm_siber_reload, wpn_pkm_siber_reload, , 3.6
anm_reload_detached_empty		= wpn_hand_pkm_siber_reload_empty, wpn_pkm_siber_reload_empty, , 3.6
anm_bore						= wpn_hand_pkm_siber_boring, wpn_pkm_siber_boring
anm_bore_empty					= wpn_hand_pkm_siber_boring, wpn_pkm_siber_idle_empty
anm_shots						= wpn_hand_pkm_siber_shoot, wpn_pkm_siber_shoot
anm_shots_empty					= wpn_hand_pkm_siber_idle, wpn_pkm_siber_idle_empty
anm_shot_l						= wpn_hand_pkm_siber_shoot, wpn_pkm_siber_shoot_empty

anm_check_magazine				= wpn_hand_pkm_siber_reload, wpn_pkm_siber_reload
anm_jump						= wpn_hand_pkm_siber_in, wpn_pkm_siber_in, 1.6
anm_jump_empty					= wpn_hand_pkm_siber_in, wpn_pkm_siber_idle_empty, 1.6
anm_use_start					= wpn_hand_pkm_siber_out, idle, 0.4
anm_use_end						= wpn_hand_pkm_siber_in, wpn_pkm_siber_in, 0.6